FROM ubuntu:22.04
ENV DEBIAN_FRONTEND noninteractive
RUN apt update && apt install -y python3 sagemath
RUN groupadd -r crypto && useradd -r -u 1001 -g crypto crypto 

RUN mkdir -p /home/crypto
RUN mkdir -p /home/crypto/cache
RUN chmod -R 777 /home/crypto/cache
RUN chown -R crypto /home/crypto
USER crypto

RUN python3 -m pip install --user pycryptodome py_ecc sagemath
COPY solve.py /home/crypto
WORKDIR /home/crypto

CMD ["python3","/home/crypto/solve.py", "cryptotraining.zone", "1354"]
